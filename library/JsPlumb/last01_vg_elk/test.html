<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Document</title>
      <script src="./jsplumb.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/elkjs/lib/elk.bundled.js"></script>
      <link rel="stylesheet" href="./test.css" />
   </head>
   <body>
      <div style="margin-bottom: 10px">
         <button onclick="addBaseNode()">노드추가</button>
         <button onclick="showEndpoint()">엔드포인트</button>
         <button onclick="exportToJson()">JSON으로 복사</button>
         <button onclick="renderCanvas2()">Canvas2로 복사</button>
      </div>

      <div
         id="canvas"
         style="
            position: relative;
            width: 1000px;
            height: 1000px;
            border: 1px solid #ccc;
         "
      >
         <!-- SVG Layer for ELK Paths -->
         <svg
            id="my-svg-layer"
            style="
               position: absolute;
               top: 0;
               left: 0;
               width: 100%;
               height: 100%;
               pointer-events: none;
               z-index: 5;
            "
         >
            <defs>
               <marker
                  id="arrowhead"
                  markerWidth="10"
                  markerHeight="7"
                  refX="10"
                  refY="3.5"
                  orient="auto"
               >
                  <polygon points="0 0, 10 3.5, 0 7" fill="#999" />
               </marker>
            </defs>
         </svg>
      </div>
      <svg width="0" height="0" xmlns="http://www.w3.org/2000/svg">
         <defs>
            <clipPath id="diamondClip" clipPathUnits="objectBoundingBox">
               <polygon points="0.5 0, 1 0.5, 0.5 1, 0 0.5" />
            </clipPath>
         </defs>
      </svg>
      <div id="property-panel" class="property-panel">
         <!-- Node 전용 -->
         <div id="node-properties" style="display: none">
            <h4>노드 편집</h4>
            <button onclick="ChangeStyle('ellipse')">Ellipse</button>
            <button onclick="ChangeStyle('rectangle1')">Rectangle Gray</button>
            <button onclick="ChangeStyle('rectangle2')">Rectangle2</button>
            <button onclick="ChangeStyle('diamond')">Diamond</button>
            <label>텍스트</label><br />
            <textarea id="prop-text"></textarea><br /><br />

            <label>너비 (width)</label><br />
            <input type="number" id="prop-width" step="5" /><br /><br />

            <label>높이 (height)</label><br />
            <input type="number" id="prop-height" step="5" /><br /><br />

            <label>배경색</label><br />
            <input type="color" id="prop-bgcolor" /><br /><br />

            <label>테두리색</label><br />
            <input type="color" id="prop-bordercolor" /><br /><br />
         </div>

         <!-- Connection 전용 -->
         <div id="connection-properties" style="display: none">
            <h4>연결선 편집</h4>
            <label>선 색상 (stroke)</label><br />
            <input type="color" id="prop-conn-color" /><br /><br />

            <label>Label 텍스트</label><br />
            <textarea id="prop-conn-label"></textarea><br /><br />

            <label>Label 색상 (class)</label><br />
            <select id="prop-conn-label-type">
               <option value="">기본</option>
               <option value="green">green</option>
               <option value="pink">pink</option>
               <option value="gray">gray</option></select
            ><br /><br />
         </div>
      </div>

      <div id="outputJSON"></div>
      <div
         id="canvas2"
         style="
            position: relative;
            width: 1000px;
            height: 1000px;
            border: 1px solid #ccc;
         "
      >
         <!-- SVG Layer for ELK Paths -->
         <svg
            id="my-svg-layer2"
            style="
               position: absolute;
               top: 0;
               left: 0;
               width: 100%;
               height: 100%;
               pointer-events: none;
               z-index: 5;
            "
         >
            <defs>
               <marker
                  id="arrowhead"
                  markerWidth="10"
                  markerHeight="7"
                  refX="10"
                  refY="3.5"
                  orient="auto"
               >
                  <polygon points="0 0, 10 3.5, 0 7" fill="#999" />
               </marker>
            </defs>
         </svg>
      </div>
      <script src="./test.js"></script>
   </body>
</html>
